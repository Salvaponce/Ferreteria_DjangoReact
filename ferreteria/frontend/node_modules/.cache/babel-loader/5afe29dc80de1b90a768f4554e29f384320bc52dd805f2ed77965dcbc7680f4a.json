{"ast":null,"code":"import _defineProperty from\"C:/Users/salva/Desktop/Visual Studio codes/Proyectos/React-Django2/ferreteria/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Users/salva/Desktop/Visual Studio codes/Proyectos/React-Django2/ferreteria/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/salva/Desktop/Visual Studio codes/Proyectos/React-Django2/ferreteria/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from\"react\";import axios from\"axios\";import ListProduct from\"./ListProduct\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Product(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),products=_useState2[0],setNewProducts=_useState2[1];var _useState3=useState({name:\"\",description:\"\",image:null,stock:false,category:\"\",price:0}),_useState4=_slicedToArray(_useState3,2),formProduct=_useState4[0],setFormProduct=_useState4[1];useEffect(function(){getProducts();},[]);function getProducts(){axios({method:\"GET\",url:\"/products/\"}).then(function(response){var data=response.data;setNewProducts(data);}).catch(function(error){if(error.response){console.log(error.response);console.log(error.response.status);console.log(error.response.headers);}});}/*function createProduct(event) {\r\n        axios({\r\n        method: \"POST\",\r\n        url:\"/products/\",\r\n        data:{\r\n            name: formProduct.name,\r\n            description: formProduct.description,\r\n            image: formProduct.image,\r\n            stock: formProduct.stock,\r\n            category: formProduct.category,\r\n            price: formProduct.price,\r\n        }\r\n        })\r\n        .then((response) => {\r\n        getProducts()\r\n        })*/function createProduct(event){event.preventDefault();// Evita que el formulario se envíe de forma predeterminada\nvar formData=new FormData();// Crea un objeto FormData para enviar el formulario\nconsole.log(formProduct.image);console.log(formProduct.image.url);formData.append(\"name\",formProduct.name);formData.append(\"description\",formProduct.description);formData.append(\"image\",formProduct.image);// Agrega la imagen al FormData\nformData.append(\"stock\",formProduct.stock);formData.append(\"category\",formProduct.category);formData.append(\"price\",formProduct.price);axios({method:\"POST\",url:\"/products/\",data:formData,// Usa el FormData en lugar de un objeto JSON\nheaders:{\"Content-Type\":\"multipart/form-data\"}// Asegura que se establezca el encabezado adecuado\n}).then(function(response){getProducts();}).catch(function(error){console.error(\"Error al crear el producto:\",error);});setFormProduct({name:\"\",description:\"\",image:\"\",stock:false,category:\"\",price:0});event.preventDefault();}function DeleteProduct(id){axios({method:\"DELETE\",url:\"/products/\".concat(id,\"/\")}).then(function(response){getProducts();});}function AddCart(id){axios({method:\"GET\",url:\"/products/\".concat(id)}).then(function(response){getProducts();});}function handleChange(event){var _event$target=event.target,value=_event$target.value,name=_event$target.name;console.log(value,name);setFormProduct(function(prevProduct){return _objectSpread(_objectSpread({},prevProduct),{},_defineProperty({},name,value));});}return/*#__PURE__*/_jsxs(\"div\",{className:\"\",children:[/*#__PURE__*/_jsxs(\"form\",{className:\"create-product\",enctype:\"multipart/form-data\",children:[/*#__PURE__*/_jsx(\"input\",{onChange:handleChange,text:formProduct.name,name:\"name\",placeholder:\"Name\",value:formProduct.name}),/*#__PURE__*/_jsx(\"textarea\",{onChange:handleChange,name:\"description\",placeholder:\"This is a description...\",value:formProduct.description}),/*#__PURE__*/_jsx(\"input\",{onChange:handleChange,text:formProduct.category,name:\"category\",placeholder:\"category\",value:formProduct.category}),/*#__PURE__*/_jsx(\"input\",{onChange:handleChange,text:formProduct.price,name:\"price\",placeholder:\"Price\",value:formProduct.price}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",name:\"image\",placeholder:\"Image\",value:formProduct.image,onChange:handleChange}),/*#__PURE__*/_jsx(\"button\",{onClick:createProduct,children:\"Create Product\"})]}),products&&products.map(function(product){return/*#__PURE__*/_jsx(ListProduct,{id:product.id,name:product.name,description:product.description,image:product.image,category:product.category,price:product.price,deletion:DeleteProduct,cart:AddCart},product.id);})]});}export default Product;","map":{"version":3,"names":["useState","useEffect","axios","ListProduct","jsx","_jsx","jsxs","_jsxs","Product","_useState","_useState2","_slicedToArray","products","setNewProducts","_useState3","name","description","image","stock","category","price","_useState4","formProduct","setFormProduct","getProducts","method","url","then","response","data","catch","error","console","log","status","headers","createProduct","event","preventDefault","formData","FormData","append","DeleteProduct","id","concat","AddCart","handleChange","_event$target","target","value","prevProduct","_objectSpread","_defineProperty","className","children","enctype","onChange","text","placeholder","type","onClick","map","product","deletion","cart"],"sources":["C:/Users/salva/Desktop/Visual Studio codes/Proyectos/React-Django2/ferreteria/frontend/src/components/Product.jsx"],"sourcesContent":["import {useState, useEffect} from \"react\"\r\nimport axios from \"axios\"\r\nimport ListProduct from \"./ListProduct\"\r\n\r\nfunction Product() {\r\n    const [products , setNewProducts] = useState(null)\r\n    const [formProduct, setFormProduct] = useState({\r\n          name: \"\",\r\n          description: \"\",\r\n          image: null,\r\n          stock: false,\r\n          category: \"\",\r\n          price: 0,\r\n          })\r\n\r\n       useEffect(() => {\r\n        getProducts()\r\n            } ,[])\r\n\r\n    function getProducts() {\r\n        axios({\r\n        method: \"GET\",\r\n        url:\"/products/\",\r\n        }).then((response)=>{\r\n        const data = response.data\r\n        setNewProducts(data)\r\n        }).catch((error) => {\r\n        if (error.response) {\r\n            console.log(error.response);\r\n            console.log(error.response.status);\r\n            console.log(error.response.headers);\r\n            }\r\n        })}\r\n\r\n    /*function createProduct(event) {\r\n        axios({\r\n        method: \"POST\",\r\n        url:\"/products/\",\r\n        data:{\r\n            name: formProduct.name,\r\n            description: formProduct.description,\r\n            image: formProduct.image,\r\n            stock: formProduct.stock,\r\n            category: formProduct.category,\r\n            price: formProduct.price,\r\n        }\r\n        })\r\n        .then((response) => {\r\n        getProducts()\r\n        })*/\r\n\r\n    function createProduct(event) {\r\n        event.preventDefault(); // Evita que el formulario se envíe de forma predeterminada\r\n        const formData = new FormData(); // Crea un objeto FormData para enviar el formulario\r\n        console.log(formProduct.image);\r\n        console.log(formProduct.image.url);\r\n        formData.append(\"name\", formProduct.name);\r\n        formData.append(\"description\", formProduct.description);\r\n        formData.append(\"image\", formProduct.image); // Agrega la imagen al FormData\r\n\r\n        formData.append(\"stock\", formProduct.stock);\r\n        formData.append(\"category\", formProduct.category);\r\n        formData.append(\"price\", formProduct.price);\r\n\r\n        axios({\r\n            method: \"POST\",\r\n            url: \"/products/\",\r\n            data: formData, // Usa el FormData en lugar de un objeto JSON\r\n            headers: { \"Content-Type\": \"multipart/form-data\" }, // Asegura que se establezca el encabezado adecuado\r\n        })\r\n        .then((response) => {\r\n            getProducts();\r\n        })\r\n        .catch((error) => {\r\n            console.error(\"Error al crear el producto:\", error);\r\n        });\r\n\r\n    \r\n        setFormProduct({\r\n            name: \"\",\r\n            description: \"\",\r\n            image: \"\",\r\n            stock: false,\r\n            category: \"\",\r\n            price: 0})\r\n\r\n            event.preventDefault()\r\n        }\r\n    \r\n    function DeleteProduct(id) {\r\n        axios({\r\n        method: \"DELETE\",\r\n        url:`/products/${id}/`,\r\n        })\r\n        .then((response) => {\r\n        getProducts()\r\n        });\r\n    } \r\n    \r\n    function AddCart(id){\r\n        axios({\r\n            method: \"GET\",\r\n            url: `/products/${id}`,\r\n        })\r\n        .then((response) => {\r\n        getProducts()\r\n        });\r\n    }\r\n    \r\n    function handleChange(event) { \r\n        const {value, name} = event.target\r\n        console.log(value, name)\r\n        setFormProduct(prevProduct => ({\r\n            ...prevProduct, [name]: value})\r\n        )}\r\n\r\n    \r\n\r\n    return (\r\n      <div className=''>\r\n\r\n            <form className=\"create-product\" enctype=\"multipart/form-data\">\r\n                <input onChange={handleChange} text={formProduct.name} name=\"name\" placeholder=\"Name\" value={formProduct.name} />\r\n                <textarea onChange={handleChange} name=\"description\" placeholder=\"This is a description...\" value={formProduct.description} />\r\n                <input onChange={handleChange} text={formProduct.category} name=\"category\" placeholder=\"category\" value={formProduct.category} />\r\n                <input onChange={handleChange} text={formProduct.price} name=\"price\" placeholder=\"Price\" value={formProduct.price} />\r\n                <input type='file' name='image' placeholder=\"Image\" value={formProduct.image} onChange={handleChange}></input>\r\n                <button onClick={createProduct}>Create Product</button>\r\n            </form>\r\n                { products && products.map(product => <ListProduct\r\n                key={product.id}\r\n                id={product.id}\r\n                name={product.name}\r\n                description={product.description}\r\n                image={product.image} \r\n                category = {product.category}\r\n                price = {product.price}\r\n                deletion ={DeleteProduct}\r\n                cart = {AddCart}\r\n                />\r\n                )}\r\n      </div>\r\n  );\r\n}\r\n\r\n\r\nexport default Product;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}